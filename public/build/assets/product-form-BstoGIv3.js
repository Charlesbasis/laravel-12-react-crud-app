import{j as l,U as q,r as u,u as me,H as ge,L as $e}from"./app-6ip9goQ_.js";import{L as F,I as P}from"./label-B8E2alir.js";import{c as C,B as he}from"./app-logo-icon-CuLmK0ue.js";import{K as B,y as Q,n as X,L as W,o as xe,_ as Ee}from"./use-sync-refs-CaxueE5l.js";import{I}from"./input-DNi9mFq3.js";import{A as ye}from"./app-layout-D33gZ2ZM.js";import{A as we}from"./arrow-left-pRJ5RdVs.js";import{L as Te}from"./loader-circle-Cioyb_ac.js";/* empty css            */import"./index-CMLLnatK.js";import"./index-CQfg_eAK.js";function Fe({className:e,...t}){return l.jsx("div",{"data-slot":"card",className:C("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function Le({className:e,...t}){return l.jsx("div",{"data-slot":"card-header",className:C("flex flex-col gap-1.5 px-6",e),...t})}function Ce({className:e,...t}){return l.jsx("div",{"data-slot":"card-title",className:C("leading-none font-semibold",e),...t})}function je({className:e,...t}){return l.jsx("div",{"data-slot":"card-content",className:C("px-6",e),...t})}const Z=typeof document<"u"?q.useLayoutEffect:()=>{};var M;const Pe=(M=q.useInsertionEffect)!==null&&M!==void 0?M:Z;function ke(e){const t=u.useRef(null);return Pe(()=>{t.current=e},[e]),u.useCallback((...r)=>{const n=t.current;return n==null?void 0:n(...r)},[])}const E=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},y=e=>e&&"window"in e&&e.window===e?e:E(e).defaultView||window;function He(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function Ie(e){return He(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let Me=!1;function G(){return Me}function ee(e,t){if(!G())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let r=t;for(;r!==null;){if(r===e)return!0;r.tagName==="SLOT"&&r.assignedSlot?r=r.assignedSlot.parentNode:Ie(r)?r=r.host:r=r.parentNode}return!1}const N=(e=document)=>{var t;if(!G())return e.activeElement;let r=e.activeElement;for(;r&&"shadowRoot"in r&&(!((t=r.shadowRoot)===null||t===void 0)&&t.activeElement);)r=r.shadowRoot.activeElement;return r};function te(e){return G()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function Ne(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let r=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(r)&&r.some(n=>e.test(n.brand))||e.test(window.navigator.userAgent)}function Se(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function re(e){let t=null;return()=>(t==null&&(t=e()),t)}const De=re(function(){return Se(/^Mac/i)}),_e=re(function(){return Ne(/Android/i)});function ne(){let e=u.useRef(new Map),t=u.useCallback((o,c,i,a)=>{let s=a!=null&&a.once?(...d)=>{e.current.delete(i),i(...d)}:i;e.current.set(i,{type:c,eventTarget:o,fn:s,options:a}),o.addEventListener(c,s,a)},[]),r=u.useCallback((o,c,i,a)=>{var s;let d=((s=e.current.get(i))===null||s===void 0?void 0:s.fn)||i;o.removeEventListener(c,d,a),e.current.delete(i)},[]),n=u.useCallback(()=>{e.current.forEach((o,c)=>{r(o.eventTarget,o.type,c,o.options)})},[r]);return u.useEffect(()=>n,[n]),{addGlobalListener:t,removeGlobalListener:r,removeAllGlobalListeners:n}}function Ae(e){return e.mozInputSource===0&&e.isTrusted?!0:_e()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function oe(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function Be(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function ae(e){let t=u.useRef({isFocused:!1,observer:null});Z(()=>{const n=t.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]);let r=ke(n=>{e==null||e(n)});return u.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){t.current.isFocused=!0;let o=n.target,c=i=>{if(t.current.isFocused=!1,o.disabled){let a=oe(i);r(a)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};o.addEventListener("focusout",c,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&o.disabled){var i;(i=t.current.observer)===null||i===void 0||i.disconnect();let a=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),t.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[r])}let We=!1,j=null,S=new Set,L=new Map,w=!1,D=!1;const Ge={Tab:!0,Escape:!0};function O(e,t){for(let r of S)r(e,t)}function Oe(e){return!(e.metaKey||!De()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function H(e){w=!0,Oe(e)&&(j="keyboard",O("keyboard",e))}function T(e){j="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(w=!0,O("pointer",e))}function ie(e){Ae(e)&&(w=!0,j="virtual")}function se(e){e.target===window||e.target===document||We||!e.isTrusted||(!w&&!D&&(j="virtual",O("virtual",e)),w=!1,D=!1)}function ue(){w=!1,D=!0}function _(e){if(typeof window>"u"||typeof document>"u"||L.get(y(e)))return;const t=y(e),r=E(e);let n=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){w=!0,n.apply(this,arguments)},r.addEventListener("keydown",H,!0),r.addEventListener("keyup",H,!0),r.addEventListener("click",ie,!0),t.addEventListener("focus",se,!0),t.addEventListener("blur",ue,!1),typeof PointerEvent<"u"&&(r.addEventListener("pointerdown",T,!0),r.addEventListener("pointermove",T,!0),r.addEventListener("pointerup",T,!0)),t.addEventListener("beforeunload",()=>{le(e)},{once:!0}),L.set(t,{focus:n})}const le=(e,t)=>{const r=y(e),n=E(e);t&&n.removeEventListener("DOMContentLoaded",t),L.has(r)&&(r.HTMLElement.prototype.focus=L.get(r).focus,n.removeEventListener("keydown",H,!0),n.removeEventListener("keyup",H,!0),n.removeEventListener("click",ie,!0),r.removeEventListener("focus",se,!0),r.removeEventListener("blur",ue,!1),typeof PointerEvent<"u"&&(n.removeEventListener("pointerdown",T,!0),n.removeEventListener("pointermove",T,!0),n.removeEventListener("pointerup",T,!0)),L.delete(r))};function Re(e){const t=E(e);let r;return t.readyState!=="loading"?_(e):(r=()=>{_(e)},t.addEventListener("DOMContentLoaded",r)),()=>le(e,r)}typeof document<"u"&&Re();function ce(){return j!=="pointer"}const Ue=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Ke(e,t,r){let n=E(r==null?void 0:r.target);const o=typeof window<"u"?y(r==null?void 0:r.target).HTMLInputElement:HTMLInputElement,c=typeof window<"u"?y(r==null?void 0:r.target).HTMLTextAreaElement:HTMLTextAreaElement,i=typeof window<"u"?y(r==null?void 0:r.target).HTMLElement:HTMLElement,a=typeof window<"u"?y(r==null?void 0:r.target).KeyboardEvent:KeyboardEvent;return e=e||n.activeElement instanceof o&&!Ue.has(n.activeElement.type)||n.activeElement instanceof c||n.activeElement instanceof i&&n.activeElement.isContentEditable,!(e&&t==="keyboard"&&r instanceof a&&!Ge[r.key])}function Ve(e,t,r){_(),u.useEffect(()=>{let n=(o,c)=>{Ke(!!(r!=null&&r.isTextInput),o,c)&&e(ce())};return S.add(n),()=>{S.delete(n)}},t)}function Ye(e){let{isDisabled:t,onFocus:r,onBlur:n,onFocusChange:o}=e;const c=u.useCallback(s=>{if(s.target===s.currentTarget)return n&&n(s),o&&o(!1),!0},[n,o]),i=ae(c),a=u.useCallback(s=>{const d=E(s.target),b=d?N(d):N();s.target===s.currentTarget&&b===te(s.nativeEvent)&&(r&&r(s),o&&o(!0),i(s))},[o,r,i]);return{focusProps:{onFocus:!t&&(r||o||n)?a:void 0,onBlur:!t&&(n||o)?c:void 0}}}function ze(e){let{isDisabled:t,onBlurWithin:r,onFocusWithin:n,onFocusWithinChange:o}=e,c=u.useRef({isFocusWithin:!1}),{addGlobalListener:i,removeAllGlobalListeners:a}=ne(),s=u.useCallback(v=>{v.currentTarget.contains(v.target)&&c.current.isFocusWithin&&!v.currentTarget.contains(v.relatedTarget)&&(c.current.isFocusWithin=!1,a(),r&&r(v),o&&o(!1))},[r,o,c,a]),d=ae(s),b=u.useCallback(v=>{if(!v.currentTarget.contains(v.target))return;const $=E(v.target),f=N($);if(!c.current.isFocusWithin&&f===te(v.nativeEvent)){n&&n(v),o&&o(!0),c.current.isFocusWithin=!0,d(v);let x=v.currentTarget;i($,"focus",p=>{if(c.current.isFocusWithin&&!ee(x,p.target)){let m=new $.defaultView.FocusEvent("blur",{relatedTarget:p.target});Be(m,x);let h=oe(m);s(h)}},{capture:!0})}},[n,o,d,i,s]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:b,onBlur:s}}}let A=!1,k=0;function Je(){A=!0,setTimeout(()=>{A=!1},50)}function z(e){e.pointerType==="touch"&&Je()}function qe(){if(!(typeof document>"u"))return k===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",z),k++,()=>{k--,!(k>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",z)}}function Qe(e){let{onHoverStart:t,onHoverChange:r,onHoverEnd:n,isDisabled:o}=e,[c,i]=u.useState(!1),a=u.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;u.useEffect(qe,[]);let{addGlobalListener:s,removeAllGlobalListeners:d}=ne(),{hoverProps:b,triggerHoverEnd:v}=u.useMemo(()=>{let $=(p,m)=>{if(a.pointerType=m,o||m==="touch"||a.isHovered||!p.currentTarget.contains(p.target))return;a.isHovered=!0;let h=p.currentTarget;a.target=h,s(E(p.target),"pointerover",g=>{a.isHovered&&a.target&&!ee(a.target,g.target)&&f(g,g.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:h,pointerType:m}),r&&r(!0),i(!0)},f=(p,m)=>{let h=a.target;a.pointerType="",a.target=null,!(m==="touch"||!a.isHovered||!h)&&(a.isHovered=!1,d(),n&&n({type:"hoverend",target:h,pointerType:m}),r&&r(!1),i(!1))},x={};return typeof PointerEvent<"u"&&(x.onPointerEnter=p=>{A&&p.pointerType==="mouse"||$(p,p.pointerType)},x.onPointerLeave=p=>{!o&&p.currentTarget.contains(p.target)&&f(p,p.pointerType)}),{hoverProps:x,triggerHoverEnd:f}},[t,r,n,o,a,s,d]);return u.useEffect(()=>{o&&v({currentTarget:a.target},a.pointerType)},[o]),{hoverProps:b,isHovered:c}}function Xe(e={}){let{autoFocus:t=!1,isTextInput:r,within:n}=e,o=u.useRef({isFocused:!1,isFocusVisible:t||ce()}),[c,i]=u.useState(!1),[a,s]=u.useState(()=>o.current.isFocused&&o.current.isFocusVisible),d=u.useCallback(()=>s(o.current.isFocused&&o.current.isFocusVisible),[]),b=u.useCallback(f=>{o.current.isFocused=f,i(f),d()},[d]);Ve(f=>{o.current.isFocusVisible=f,d()},[],{isTextInput:r});let{focusProps:v}=Ye({isDisabled:n,onFocusChange:b}),{focusWithinProps:$}=ze({isDisabled:!n,onFocusWithinChange:b});return{isFocused:c,isFocusVisible:a,focusProps:n?$:v}}let Ze=u.createContext(void 0);function R(){return u.useContext(Ze)}let et=u.createContext(void 0);function de(){return u.useContext(et)}function tt(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function fe(e){return tt(e)&&"tagName"in e}function pe(e){return fe(e)&&"accessKey"in e}function rt(e){return pe(e)&&e.nodeName==="INPUT"}function J(e){return pe(e)&&e.nodeName==="LABEL"}function nt(e){return fe(e)?e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}let U=u.createContext(null);U.displayName="DescriptionContext";function ve(){let e=u.useContext(U);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,ve),t}return e}function ot(){var e,t;return(t=(e=u.useContext(U))==null?void 0:e.value)!=null?t:void 0}let at="p";function it(e,t){let r=u.useId(),n=R(),{id:o=`headlessui-description-${r}`,...c}=e,i=ve(),a=Q(t);X(()=>i.register(o),[o,i.register]);let s=n||!1,d=u.useMemo(()=>({...i.slot,disabled:s}),[i.slot,s]),b={ref:a,...i.props,id:o};return W()({ourProps:b,theirProps:c,slot:d,defaultTag:at,name:i.name||"Description"})}let st=B(it);Object.assign(st,{});let K=u.createContext(null);K.displayName="LabelContext";function be(){let e=u.useContext(K);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,be),t}return e}function ut(e){var t,r,n;let o=(r=(t=u.useContext(K))==null?void 0:t.value)!=null?r:void 0;return((n=void 0)!=null?n:0)>0?[o,...e].filter(Boolean).join(" "):o}let lt="label";function ct(e,t){var r;let n=u.useId(),o=be(),c=de(),i=R(),{id:a=`headlessui-label-${n}`,htmlFor:s=c??((r=o.props)==null?void 0:r.htmlFor),passive:d=!1,...b}=e,v=Q(t);X(()=>o.register(a),[a,o.register]);let $=xe(m=>{let h=m.currentTarget;if(!(m.target!==m.currentTarget&&nt(m.target))&&(J(h)&&m.preventDefault(),o.props&&"onClick"in o.props&&typeof o.props.onClick=="function"&&o.props.onClick(m),J(h))){let g=document.getElementById(h.htmlFor);if(g){let V=g.getAttribute("disabled");if(V==="true"||V==="")return;let Y=g.getAttribute("aria-disabled");if(Y==="true"||Y==="")return;(rt(g)&&(g.type==="file"||g.type==="radio"||g.type==="checkbox")||g.role==="radio"||g.role==="checkbox"||g.role==="switch")&&g.click(),g.focus({preventScroll:!0})}}}),f=i||!1,x=u.useMemo(()=>({...o.slot,disabled:f}),[o.slot,f]),p={ref:v,...o.props,id:a,htmlFor:s,onClick:$};return d&&("onClick"in p&&(delete p.htmlFor,delete p.onClick),"onClick"in b&&delete b.onClick),W()({ourProps:p,theirProps:b,slot:x,defaultTag:s?lt:"div",name:o.name||"Label"})}let dt=B(ct);Object.assign(dt,{});let ft="textarea";function pt(e,t){let r=u.useId(),n=de(),o=R(),{id:c=n||`headlessui-textarea-${r}`,disabled:i=o||!1,autoFocus:a=!1,invalid:s=!1,...d}=e,b=ut(),v=ot(),{isFocused:$,focusProps:f}=Xe({autoFocus:a}),{isHovered:x,hoverProps:p}=Qe({isDisabled:i}),m=Ee({ref:t,id:c,"aria-labelledby":b,"aria-describedby":v,"aria-invalid":s?"true":void 0,disabled:i||void 0,autoFocus:a},f,p),h=u.useMemo(()=>({disabled:i,invalid:s,hover:x,focus:$,autofocus:a}),[i,s,x,$,a]);return W()({ourProps:m,theirProps:d,slot:h,defaultTag:ft,name:"Textarea"})}let vt=B(pt);const bt=({className:e,...t})=>l.jsx(vt,{"data-slot":"textarea",className:C("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...t});function Ct({...e}){const{product:t,isView:r,isEdit:n}=e,o=[{title:`${r?"Show":n?"Update":"Create"} Product`,href:route("products.create")}],{data:c,setData:i,post:a,processing:s,errors:d,reset:b}=me({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",price:(t==null?void 0:t.price)||0,featured_image:null,_method:n?"PUT":"POST"}),v=f=>{f.preventDefault(),n?a(route("products.update",t.id),{onSuccess:()=>b(),forceFormData:!0}):a(route("products.store"),{onSuccess:()=>b()})},$=f=>{f.target.files&&f.target.files.length>0&&i("featured_image",f.target.files[0])};return l.jsxs(ye,{breadcrumbs:o,children:[l.jsx(ge,{title:"Product Management"}),l.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[l.jsx("div",{className:"ml-auto",children:l.jsxs($e,{as:"button",className:"flex items-center text-md w-fit cursor-pointer rounded-lg bg-indigo-800 px-4 py-2 text-white hover:opacity-90",href:route("products.index"),children:[l.jsx(we,{className:"me-2"})," Back to Products"]})}),l.jsxs(Fe,{children:[l.jsx(Le,{children:l.jsxs(Ce,{children:[r?"Show":n?"Update":"Create"," Product "]})}),l.jsx(je,{children:l.jsx("form",{onSubmit:v,className:"flex flex-col gap-4",autoComplete:"off",children:l.jsxs("div",{className:"grid gap-6",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx(F,{htmlFor:"name",children:"Product Name"}),l.jsx(I,{value:c.name,onChange:f=>i("name",f.target.value),id:"name",name:"name",type:"text",placeholder:"Product Name",autoFocus:!0,tabIndex:1,disabled:r||s}),l.jsx(P,{message:d.name})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx(F,{htmlFor:"description",children:"Description"}),l.jsx(bt,{value:c.description,onChange:f=>i("description",f.target.value),id:"description",name:"description",tabIndex:2,placeholder:"Product Description",rows:3,disabled:r||s}),l.jsx(P,{message:d.description})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx(F,{htmlFor:"price",children:"Price"}),l.jsx(I,{value:c.price,onChange:f=>i("price",f.target.value),id:"price",name:"price",type:"text",placeholder:"Product Price",autoFocus:!0,tabIndex:3,disabled:r||s}),l.jsx(P,{message:d.price})]}),!r&&l.jsxs("div",{className:"grid gap-2",children:[l.jsx(F,{htmlFor:"featured_image",children:"Featured Image"}),l.jsx(I,{onChange:$,id:"featured_image",name:"featured_image",type:"file",accept:"image/*",autoFocus:!0,tabIndex:4}),l.jsx(P,{message:d.featured_image})]}),(r||n)&&(t==null?void 0:t.featured_image)&&l.jsxs("div",{className:"grid gap-2",children:[l.jsx(F,{htmlFor:"featured_image",children:"Current Featured Image"}),l.jsx("img",{src:t==null?void 0:t.featured_image,alt:"Featured Image",className:"w-24 h-24 object-cover rounded-lg"})]}),!r&&l.jsxs(he,{type:"submit",className:"mt-4 w-fit",tabIndex:4,children:[s&&l.jsx(Te,{className:"h-4 w-4 animate-spin"}),s?n?"Updating...":"Creating...":n?"Update":"Create"," Product"]})]})})})]})]})]})}export{Ct as default};
