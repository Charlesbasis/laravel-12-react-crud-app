import{r as l,U as E,t as Ce}from"./app-BkYlQzDy.js";import{n as R,s as K,K as G,y as le,A as w,o as $,m as Ee,t as Fe,L as ie,O as ye,a as Te,u as se}from"./use-sync-refs-DzEJJux4.js";function $e(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(n=>setTimeout(()=>{throw n}))}function q(){let e=[],n={addEventListener(t,r,i,a){return t.addEventListener(r,i,a),n.add(()=>t.removeEventListener(r,i,a))},requestAnimationFrame(...t){let r=requestAnimationFrame(...t);return n.add(()=>cancelAnimationFrame(r))},nextFrame(...t){return n.requestAnimationFrame(()=>n.requestAnimationFrame(...t))},setTimeout(...t){let r=setTimeout(...t);return n.add(()=>clearTimeout(r))},microTask(...t){let r={current:!0};return $e(()=>{r.current&&t[0]()}),n.add(()=>{r.current=!1})},style(t,r,i){let a=t.style.getPropertyValue(r);return Object.assign(t.style,{[r]:i}),this.add(()=>{Object.assign(t.style,{[r]:a})})},group(t){let r=q();return t(r),this.add(()=>r.dispose())},add(t){return e.includes(t)||e.push(t),()=>{let r=e.indexOf(t);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let t of e.splice(0))t()}};return n}function ae(){let[e]=l.useState(q);return l.useEffect(()=>()=>e.dispose(),[e]),e}function Ae(e=0){let[n,t]=l.useState(e),r=l.useCallback(s=>t(s),[n]),i=l.useCallback(s=>t(o=>o|s),[n]),a=l.useCallback(s=>(n&s)===s,[n]),c=l.useCallback(s=>t(o=>o&~s),[t]),f=l.useCallback(s=>t(o=>o^s),[t]);return{flags:n,setFlag:r,addFlag:i,hasFlag:a,removeFlag:c,toggleFlag:f}}var Se={},ne,re;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((ne=process==null?void 0:Se)==null?void 0:ne.NODE_ENV)==="test"&&typeof((re=Element==null?void 0:Element.prototype)==null?void 0:re.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var we=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(we||{});function xe(e){let n={};for(let t in e)e[t]===!0&&(n[`data-${t}`]="");return n}function Re(e,n,t,r){let[i,a]=l.useState(t),{hasFlag:c,addFlag:f,removeFlag:s}=Ae(e&&i?3:0),o=l.useRef(!1),v=l.useRef(!1),F=ae();return R(()=>{var b;if(e){if(t&&a(!0),!n){t&&f(3);return}return(b=r==null?void 0:r.start)==null||b.call(r,t),Pe(n,{inFlight:o,prepare(){v.current?v.current=!1:v.current=o.current,o.current=!0,!v.current&&(t?(f(3),s(4)):(f(4),s(2)))},run(){v.current?t?(s(3),f(4)):(s(4),f(3)):t?s(1):f(1)},done(){var d;v.current&&typeof n.getAnimations=="function"&&n.getAnimations().length>0||(o.current=!1,s(7),t||a(!1),(d=r==null?void 0:r.end)==null||d.call(r,t))}})}},[e,t,n,F]),e?[i,{closed:c(1),enter:c(2),leave:c(4),transition:c(2)||c(4)}]:[t,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Pe(e,{prepare:n,run:t,done:r,inFlight:i}){let a=q();return Le(e,{prepare:n,inFlight:i}),a.nextFrame(()=>{t(),a.requestAnimationFrame(()=>{a.add(Oe(e,r))})}),a.dispose}function Oe(e,n){var t,r;let i=q();if(!e)return i.dispose;let a=!1;i.add(()=>{a=!0});let c=(r=(t=e.getAnimations)==null?void 0:t.call(e).filter(f=>f instanceof CSSTransition))!=null?r:[];return c.length===0?(n(),i.dispose):(Promise.allSettled(c.map(f=>f.finished)).then(()=>{a||n()}),i.dispose)}function Le(e,{inFlight:n,prepare:t}){if(n!=null&&n.current){t();return}let r=e.style.transition;e.style.transition="none",t(),e.offsetHeight,e.style.transition=r}let Q=l.createContext(null);Q.displayName="OpenClosedContext";var x=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(x||{});function ue(){return l.useContext(Q)}function ke({value:e,children:n}){return E.createElement(Q.Provider,{value:e},n)}function He(){let e=typeof document>"u";return(n=>n.useSyncExternalStore)(Ce)(()=>()=>{},()=>!1,()=>!e)}function oe(){let e=He(),[n,t]=l.useState(K.isHandoffComplete);return n&&K.isHandoffComplete===!1&&t(!1),l.useEffect(()=>{n!==!0&&t(!0)},[n]),l.useEffect(()=>K.handoff(),[]),e?!1:n}function Ne(){let e=l.useRef(!1);return R(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function de(e){var n;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((n=e.as)!=null?n:fe)!==l.Fragment||E.Children.count(e.children)===1}let M=l.createContext(null);M.displayName="TransitionContext";var je=(e=>(e.Visible="visible",e.Hidden="hidden",e))(je||{});function qe(){let e=l.useContext(M);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Me(){let e=l.useContext(U);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let U=l.createContext(null);U.displayName="NestingContext";function D(e){return"children"in e?D(e.children):e.current.filter(({el:n})=>n.current!==null).filter(({state:n})=>n==="visible").length>0}function ce(e,n){let t=Te(e),r=l.useRef([]),i=Ne(),a=ae(),c=$((d,u=w.Hidden)=>{let p=r.current.findIndex(({el:m})=>m===d);p!==-1&&(se(u,{[w.Unmount](){r.current.splice(p,1)},[w.Hidden](){r.current[p].state="hidden"}}),a.microTask(()=>{var m;!D(r)&&i.current&&((m=t.current)==null||m.call(t))}))}),f=$(d=>{let u=r.current.find(({el:p})=>p===d);return u?u.state!=="visible"&&(u.state="visible"):r.current.push({el:d,state:"visible"}),()=>c(d,w.Unmount)}),s=l.useRef([]),o=l.useRef(Promise.resolve()),v=l.useRef({enter:[],leave:[]}),F=$((d,u,p)=>{s.current.splice(0),n&&(n.chains.current[u]=n.chains.current[u].filter(([m])=>m!==d)),n==null||n.chains.current[u].push([d,new Promise(m=>{s.current.push(m)})]),n==null||n.chains.current[u].push([d,new Promise(m=>{Promise.all(v.current[u].map(([A,P])=>P)).then(()=>m())})]),u==="enter"?o.current=o.current.then(()=>n==null?void 0:n.wait.current).then(()=>p(u)):p(u)}),b=$((d,u,p)=>{Promise.all(v.current[u].splice(0).map(([m,A])=>A)).then(()=>{var m;(m=s.current.shift())==null||m()}).then(()=>p(u))});return l.useMemo(()=>({children:r,register:f,unregister:c,onStart:F,onStop:b,wait:o,chains:v}),[f,c,r,F,b,v,o])}let fe=l.Fragment,me=ye.RenderStrategy;function Ue(e,n){var t,r;let{transition:i=!0,beforeEnter:a,afterEnter:c,beforeLeave:f,afterLeave:s,enter:o,enterFrom:v,enterTo:F,entered:b,leave:d,leaveFrom:u,leaveTo:p,...m}=e,[A,P]=l.useState(null),h=l.useRef(null),T=de(e),S=le(...T?[h,n,P]:n===null?[]:[n]),W=(t=m.unmount)==null||t?w.Unmount:w.Hidden,{show:C,appear:X,initial:Y}=qe(),[y,I]=l.useState(C?"visible":"hidden"),Z=Me(),{register:k,unregister:H}=Z;R(()=>k(h),[k,h]),R(()=>{if(W===w.Hidden&&h.current){if(C&&y!=="visible"){I("visible");return}return se(y,{hidden:()=>H(h),visible:()=>k(h)})}},[y,h,k,H,C,W]);let z=oe();R(()=>{if(T&&z&&y==="visible"&&h.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[h,y,z,T]);let ve=Y&&!X,J=X&&C&&Y,V=l.useRef(!1),N=ce(()=>{V.current||(I("hidden"),H(h))},Z),ee=$(_=>{V.current=!0;let j=_?"enter":"leave";N.onStart(h,j,L=>{L==="enter"?a==null||a():L==="leave"&&(f==null||f())})}),te=$(_=>{let j=_?"enter":"leave";V.current=!1,N.onStop(h,j,L=>{L==="enter"?c==null||c():L==="leave"&&(s==null||s())}),j==="leave"&&!D(N)&&(I("hidden"),H(h))});l.useEffect(()=>{T&&i||(ee(C),te(C))},[C,T,i]);let he=!(!i||!T||!z||ve),[,g]=Re(he,A,C,{start:ee,end:te}),ge=Ee({ref:S,className:((r=Fe(m.className,J&&o,J&&v,g.enter&&o,g.enter&&g.closed&&v,g.enter&&!g.closed&&F,g.leave&&d,g.leave&&!g.closed&&u,g.leave&&g.closed&&p,!g.transition&&C&&b))==null?void 0:r.trim())||void 0,...xe(g)}),O=0;y==="visible"&&(O|=x.Open),y==="hidden"&&(O|=x.Closed),C&&y==="hidden"&&(O|=x.Opening),!C&&y==="visible"&&(O|=x.Closing);let be=ie();return E.createElement(U.Provider,{value:N},E.createElement(ke,{value:O},be({ourProps:ge,theirProps:m,defaultTag:fe,features:me,visible:y==="visible",name:"Transition.Child"})))}function De(e,n){let{show:t,appear:r=!1,unmount:i=!0,...a}=e,c=l.useRef(null),f=de(e),s=le(...f?[c,n]:n===null?[]:[n]);oe();let o=ue();if(t===void 0&&o!==null&&(t=(o&x.Open)===x.Open),t===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[v,F]=l.useState(t?"visible":"hidden"),b=ce(()=>{t||F("hidden")}),[d,u]=l.useState(!0),p=l.useRef([t]);R(()=>{d!==!1&&p.current[p.current.length-1]!==t&&(p.current.push(t),u(!1))},[p,t]);let m=l.useMemo(()=>({show:t,appear:r,initial:d}),[t,r,d]);R(()=>{t?F("visible"):!D(b)&&c.current!==null&&F("hidden")},[t,b]);let A={unmount:i},P=$(()=>{var S;d&&u(!1),(S=e.beforeEnter)==null||S.call(e)}),h=$(()=>{var S;d&&u(!1),(S=e.beforeLeave)==null||S.call(e)}),T=ie();return E.createElement(U.Provider,{value:b},E.createElement(M.Provider,{value:m},T({ourProps:{...A,as:l.Fragment,children:E.createElement(pe,{ref:s,...A,...a,beforeEnter:P,beforeLeave:h})},theirProps:{},defaultTag:l.Fragment,features:me,visible:v==="visible",name:"Transition"})))}function Ie(e,n){let t=l.useContext(M)!==null,r=ue()!==null;return E.createElement(E.Fragment,null,!t&&r?E.createElement(B,{ref:n,...e}):E.createElement(pe,{ref:n,...e}))}let B=G(De),pe=G(Ue),ze=G(Ie),Ke=Object.assign(B,{Child:ze,Root:B});export{Ke as z};
